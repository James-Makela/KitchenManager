<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:local="clr-namespace:KitchenManager.Models"
             x:Class="KitchenManager.RecipesPage"
             Title="NewPage1">
    <Grid RowDefinitions="1*, 1*, 1*, 10*, 1*"
          ColumnDefinitions="1*, 1*"
          BackgroundColor="#0d1b2a"
          RowSpacing="0">
        
        <!-- Header -->
        <Label Text="Recipes"
               Grid.Row="0"
               Grid.ColumnSpan="2"
               FontSize="25"
               TextColor="WhiteSmoke"
               VerticalOptions="Center"
               HorizontalOptions="Center"/>

        <!-- Tabs -->
        <Border Stroke="#d9d9d9"
                StrokeShape="RoundRectangle 10, 10, 0, 0"
                Background="#d9d9d9"
                Grid.Row="1"
                Grid.ColumnSpan="2" />
        <Border x:Name="Border_SavedRecipes"
                Padding="0"
                Stroke="#d9d9d9"
                StrokeShape="RoundRectangle 10, 10, 0, 0"
                Background="#d9d9d9"
                Grid.Row="1"
                Grid.Column="0">
            <Button x:Name="Button_SavedRecipes"
                    Text="Saved"
                    CornerRadius="10"
                    Background="Transparent"
                    TextColor="#415a77"
                    Pressed="Button_SavedRecipes_Pressed"/>
        </Border>
        <Border x:Name="Border_NewRecipes"
                Padding="0"
                Stroke="#415a77"
                StrokeThickness="1"
                StrokeShape="RoundRectangle 10, 10, 0, 0"
                Background="#415a77"
                Grid.Row="1"
                Grid.Column="1">
            <Button x:Name="Button_NewRecipes"
                    Text="New"
                    CornerRadius="10"
                    Background="Transparent"
                    TextColor="#d9d9d9"
                    Pressed="Button_NewRecipes_Pressed"/>
        </Border>

        <!-- Main Background -->
        <Border Margin="-2"
                StrokeThickness="2"
                Stroke="#415a77"
                Background="#415a77"
                Grid.Row="2"
                Grid.RowSpan="2"
                Grid.ColumnSpan="2" />
        <!-- Search Box -->
        <Border Stroke="#d9d9d9"
                StrokeShape="RoundRectangle 20, 20, 20, 20"
                Background="#d9d9d9"
                Grid.Row="2"
                Grid.ColumnSpan="2"
                Margin="10, 5, 10, 5">
            <Entry x:Name="Entry_SearchBox"
                   Placeholder="Search"
                   ClearButtonVisibility="WhileEditing"
                   Margin="30, 0, 10, 0"
                   />
        </Border>

        <!-- Recipe List -->
        <Border x:Name="Border_CollectionView" Stroke="#c5c4c4"
                StrokeShape="RoundRectangle 10, 10, 0, 0"
                Background="#c5c4c4"
                Grid.Row="3"
                Grid.ColumnSpan="2"
                Margin="10, 0, 10, 0">
            <CollectionView x:Name="CollectionView_Recipes"
                            SelectionMode="Single"
                            ItemSizingStrategy="MeasureFirstItem"
                            SelectionChanged="CollectionView_Recipes_SelectionChanged">
                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="local:Recipe">
                        <Border Margin="5"
                                Padding="10"
                                Stroke="#d9d9d9"
                                StrokeShape="RoundRectangle 5, 5, 5, 5"
                                Background="#d9d9d9"
                                MinimumHeightRequest="100">
                            <Grid ColumnDefinitions="1*, 1*, 1*, 1*" 
                                  RowDefinitions="1*, 2*">
                                <Label Text="{Binding Label, Mode=OneWay}"
                                       Grid.ColumnSpan="3" />
                                <Border Stroke="Transparent"
                                        StrokeThickness="0"
                                        StrokeShape="RoundRectangle 10"
                                        Grid.Column="3"
                                        Grid.RowSpan="2">
                                    <Image Source="{Binding ImageLink, Mode=OneWay}"/>
                                </Border>
                            </Grid>
                        </Border>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </Border>
    </Grid>
    
</ContentPage>